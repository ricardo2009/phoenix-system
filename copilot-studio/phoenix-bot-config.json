{
  "name": "Phoenix System Bot",
  "description": "Intelligent bot for Phoenix incident management system",
  "version": "1.0.0",
  "language": "pt-BR",
  "capabilities": [
    "incident_monitoring",
    "status_reporting", 
    "approval_handling",
    "escalation_management"
  ],
  "topics": [
    {
      "id": "greeting",
      "name": "Greeting",
      "trigger_phrases": [
        "ol√°",
        "oi",
        "bom dia",
        "boa tarde",
        "boa noite",
        "help",
        "ajuda"
      ],
      "response": {
        "type": "adaptive_card",
        "content": {
          "type": "AdaptiveCard",
          "version": "1.4",
          "body": [
            {
              "type": "TextBlock",
              "text": "ü§ñ **Phoenix System Bot**",
              "weight": "Bolder",
              "size": "Large",
              "color": "Accent"
            },
            {
              "type": "TextBlock",
              "text": "Ol√°! Sou o assistente inteligente do Sistema Phoenix. Posso ajud√°-lo com:",
              "wrap": true,
              "spacing": "Medium"
            },
            {
              "type": "FactSet",
              "facts": [
                {
                  "title": "üö® Incidentes",
                  "value": "Monitorar status e hist√≥rico"
                },
                {
                  "title": "üìä Relat√≥rios",
                  "value": "Gerar relat√≥rios de performance"
                },
                {
                  "title": "‚úÖ Aprova√ß√µes",
                  "value": "Processar aprova√ß√µes de a√ß√µes"
                },
                {
                  "title": "üîî Alertas",
                  "value": "Configurar notifica√ß√µes"
                }
              ]
            }
          ],
          "actions": [
            {
              "type": "Action.Submit",
              "title": "Ver Incidentes Ativos",
              "data": {
                "action": "list_incidents"
              }
            },
            {
              "type": "Action.Submit", 
              "title": "Status do Sistema",
              "data": {
                "action": "system_status"
              }
            }
          ]
        }
      }
    },
    {
      "id": "list_incidents",
      "name": "List Active Incidents",
      "trigger_phrases": [
        "incidentes",
        "incidents",
        "problemas",
        "issues",
        "alertas",
        "alerts"
      ],
      "response": {
        "type": "function_call",
        "function": "get_active_incidents",
        "parameters": {}
      }
    },
    {
      "id": "incident_details",
      "name": "Get Incident Details",
      "trigger_phrases": [
        "detalhes do incidente",
        "incident details",
        "status do incidente",
        "incident status"
      ],
      "response": {
        "type": "function_call",
        "function": "get_incident_details",
        "parameters": {
          "incident_id": "{incident_id}"
        }
      }
    },
    {
      "id": "system_status",
      "name": "System Status",
      "trigger_phrases": [
        "status do sistema",
        "system status",
        "sa√∫de do sistema",
        "system health"
      ],
      "response": {
        "type": "function_call",
        "function": "get_system_status",
        "parameters": {}
      }
    },
    {
      "id": "approve_action",
      "name": "Approve Resolution Action",
      "trigger_phrases": [
        "aprovar",
        "approve",
        "autorizar",
        "authorize",
        "sim",
        "yes"
      ],
      "response": {
        "type": "function_call",
        "function": "approve_resolution",
        "parameters": {
          "incident_id": "{incident_id}",
          "action": "APPROVE"
        }
      }
    },
    {
      "id": "deny_action",
      "name": "Deny Resolution Action",
      "trigger_phrases": [
        "negar",
        "deny",
        "rejeitar",
        "reject",
        "n√£o",
        "no"
      ],
      "response": {
        "type": "function_call",
        "function": "approve_resolution",
        "parameters": {
          "incident_id": "{incident_id}",
          "action": "DENY"
        }
      }
    },
    {
      "id": "generate_report",
      "name": "Generate Report",
      "trigger_phrases": [
        "relat√≥rio",
        "report",
        "resumo",
        "summary",
        "estat√≠sticas",
        "statistics"
      ],
      "response": {
        "type": "function_call",
        "function": "generate_incident_report",
        "parameters": {
          "period": "{period}",
          "format": "adaptive_card"
        }
      }
    }
  ],
  "functions": [
    {
      "name": "get_active_incidents",
      "description": "Retrieve list of active incidents",
      "endpoint": "https://func-orchestrator-phoenix-dev.azurewebsites.net/api/incidents",
      "method": "GET",
      "headers": {
        "Content-Type": "application/json",
        "x-functions-key": "{function_key}"
      },
      "response_template": {
        "type": "AdaptiveCard",
        "version": "1.4",
        "body": [
          {
            "type": "TextBlock",
            "text": "üö® **Incidentes Ativos**",
            "weight": "Bolder",
            "size": "Medium"
          },
          {
            "type": "Container",
            "items": "{{#incidents}}",
            "separator": true,
            "items": [
              {
                "type": "ColumnSet",
                "columns": [
                  {
                    "type": "Column",
                    "width": "stretch",
                    "items": [
                      {
                        "type": "TextBlock",
                        "text": "**{{title}}**",
                        "weight": "Bolder"
                      },
                      {
                        "type": "TextBlock",
                        "text": "ID: {{id}}",
                        "size": "Small",
                        "color": "Accent"
                      },
                      {
                        "type": "TextBlock",
                        "text": "Status: {{status}}",
                        "size": "Small"
                      }
                    ]
                  },
                  {
                    "type": "Column",
                    "width": "auto",
                    "items": [
                      {
                        "type": "TextBlock",
                        "text": "{{severity}}",
                        "color": "{{#if (eq severity 'critical')}}Attention{{else}}Good{{/if}}",
                        "weight": "Bolder"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ],
        "actions": [
          {
            "type": "Action.Submit",
            "title": "Atualizar",
            "data": {
              "action": "refresh_incidents"
            }
          }
        ]
      }
    },
    {
      "name": "get_incident_details",
      "description": "Get detailed information about a specific incident",
      "endpoint": "https://func-orchestrator-phoenix-dev.azurewebsites.net/api/incident/{incident_id}",
      "method": "GET",
      "headers": {
        "Content-Type": "application/json",
        "x-functions-key": "{function_key}"
      },
      "response_template": {
        "type": "AdaptiveCard",
        "version": "1.4",
        "body": [
          {
            "type": "TextBlock",
            "text": "üìã **Detalhes do Incidente**",
            "weight": "Bolder",
            "size": "Medium"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "ID",
                "value": "{{incident.id}}"
              },
              {
                "title": "T√≠tulo",
                "value": "{{incident.title}}"
              },
              {
                "title": "Severidade",
                "value": "{{incident.severity}}"
              },
              {
                "title": "Status",
                "value": "{{incident.status}}"
              },
              {
                "title": "Criado em",
                "value": "{{incident.created_at}}"
              },
              {
                "title": "Agentes Atribu√≠dos",
                "value": "{{join incident.assigned_agents ', '}}"
              }
            ]
          },
          {
            "type": "TextBlock",
            "text": "**A√ß√µes de Resolu√ß√£o:**",
            "weight": "Bolder",
            "spacing": "Medium"
          },
          {
            "type": "Container",
            "items": "{{#incident.resolution_actions}}",
            "items": [
              {
                "type": "TextBlock",
                "text": "‚Ä¢ {{description}}",
                "wrap": true
              }
            ]
          }
        ]
      }
    },
    {
      "name": "get_system_status",
      "description": "Get overall system health status",
      "endpoint": "https://func-orchestrator-phoenix-dev.azurewebsites.net/api/health",
      "method": "GET",
      "headers": {
        "Content-Type": "application/json",
        "x-functions-key": "{function_key}"
      },
      "response_template": {
        "type": "AdaptiveCard",
        "version": "1.4",
        "body": [
          {
            "type": "TextBlock",
            "text": "üíö **Status do Sistema Phoenix**",
            "weight": "Bolder",
            "size": "Medium"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "Status Geral",
                "value": "{{status}}"
              },
              {
                "title": "Agente Orquestrador",
                "value": "{{#if agent_initialized}}‚úÖ Ativo{{else}}‚ùå Inativo{{/if}}"
              },
              {
                "title": "√öltima Verifica√ß√£o",
                "value": "{{timestamp}}"
              },
              {
                "title": "Vers√£o",
                "value": "{{version}}"
              }
            ]
          },
          {
            "type": "TextBlock",
            "text": "**Servi√ßos Azure:**",
            "weight": "Bolder",
            "spacing": "Medium"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "Cosmos DB",
                "value": "{{azure_services.cosmos_db}}"
              },
              {
                "title": "Event Hub",
                "value": "{{azure_services.event_hub}}"
              },
              {
                "title": "OpenAI",
                "value": "{{azure_services.openai}}"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "approve_resolution",
      "description": "Approve or deny resolution actions",
      "endpoint": "https://func-communication-phoenix-dev.azurewebsites.net/api/approval",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json",
        "x-functions-key": "{function_key}"
      },
      "body": {
        "incident_id": "{incident_id}",
        "response": "{action}",
        "responder": "{user_name}"
      },
      "response_template": {
        "type": "AdaptiveCard",
        "version": "1.4",
        "body": [
          {
            "type": "TextBlock",
            "text": "{{#if success}}‚úÖ **Aprova√ß√£o Processada**{{else}}‚ùå **Erro na Aprova√ß√£o**{{/if}}",
            "weight": "Bolder",
            "color": "{{#if success}}Good{{else}}Attention{{/if}}"
          },
          {
            "type": "TextBlock",
            "text": "{{message}}",
            "wrap": true
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "Incidente ID",
                "value": "{{incident_id}}"
              },
              {
                "title": "Processado em",
                "value": "{{timestamp}}"
              }
            ]
          }
        ]
      }
    },
    {
      "name": "generate_incident_report",
      "description": "Generate incident summary report",
      "endpoint": "https://func-orchestrator-phoenix-dev.azurewebsites.net/api/incidents",
      "method": "GET",
      "headers": {
        "Content-Type": "application/json",
        "x-functions-key": "{function_key}"
      },
      "response_template": {
        "type": "AdaptiveCard",
        "version": "1.4",
        "body": [
          {
            "type": "TextBlock",
            "text": "üìä **Relat√≥rio de Incidentes**",
            "weight": "Bolder",
            "size": "Medium"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "Total de Incidentes",
                "value": "{{count}}"
              },
              {
                "title": "Gerado em",
                "value": "{{timestamp}}"
              }
            ]
          },
          {
            "type": "TextBlock",
            "text": "**Resumo por Severidade:**",
            "weight": "Bolder",
            "spacing": "Medium"
          },
          {
            "type": "Container",
            "items": [
              {
                "type": "TextBlock",
                "text": "üî¥ Cr√≠ticos: {{critical_count}}",
                "color": "Attention"
              },
              {
                "type": "TextBlock",
                "text": "üü° Altos: {{high_count}}",
                "color": "Warning"
              },
              {
                "type": "TextBlock",
                "text": "üü¢ M√©dios/Baixos: {{medium_low_count}}",
                "color": "Good"
              }
            ]
          }
        ],
        "actions": [
          {
            "type": "Action.OpenUrl",
            "title": "Ver Dashboard Completo",
            "url": "https://portal.azure.com"
          }
        ]
      }
    }
  ],
  "settings": {
    "authentication": {
      "type": "azure_ad",
      "tenant_id": "{tenant_id}",
      "client_id": "{client_id}"
    },
    "channels": [
      {
        "type": "teams",
        "enabled": true,
        "settings": {
          "app_id": "{teams_app_id}",
          "app_password": "{teams_app_password}"
        }
      },
      {
        "type": "web_chat",
        "enabled": true,
        "settings": {
          "direct_line_secret": "{direct_line_secret}"
        }
      }
    ],
    "analytics": {
      "application_insights": {
        "instrumentation_key": "{app_insights_key}"
      }
    },
    "security": {
      "allowed_domains": [
        "*.azurewebsites.net",
        "*.microsoft.com"
      ],
      "rate_limiting": {
        "requests_per_minute": 60,
        "requests_per_hour": 1000
      }
    }
  }
}

